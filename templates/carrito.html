<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=5">
  <title>Carrito - RM KITS</title>
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="icon" type="image/ico" href="/static/img/iconorm.ico">
</head>
<body>
  <div class="top-bar">
    <div class="logo">
      <img src="/static/img/logo.PNG" alt="RM KITS Logo">
    </div>
    <div class="brand-name">RM KITS</div>
    <div style="margin-left:auto">
      <a href="/" class="volver">← Seguir comprando</a>
    </div>
  </div>

  <section class="info-section">
    <p><strong>Compras mayoristas RM KITS:</strong> solo permitimos compras a partir de <strong>$200.000</strong>. Hacemos envíos a todo el país.</p>
  </section>

  <main class="cart-container">
    <h2>Tu carrito</h2>

    <div id="lista-carrito"></div>

    <div class="resumen">
      <div>Total: <span id="total">$0</span></div>
      <div id="alerta" class="alerta" style="display:none; color:#b71c1c; margin-top:6px;">
        El pedido debe ser de al menos $200.000 para poder enviarlo.
      </div>
    </div>

    <section class="checkout-section">
      <h3>Entrega</h3>
      <div class="entrega-opciones">
        <label class="radio"><input type="radio" name="entrega" value="retiro" checked> Retira en el local (Av. Rivadavia 2768, CABA)</label>
        <label class="radio"><input type="radio" name="entrega" value="envio"> Con envío (a cargo del comprador)</label>
      </div>

      <div id="envio-form" class="envio-form" style="display:none;">
        <div class="envio-layout">
          <!-- Columna izquierda -->
          <div id="info-box" class="envios-box"></div>

          <!-- Columna derecha -->
          <div id="envio-fields" class="envio-fields">
            <div class="form-row"><label for="envio-direccion">Dirección *</label><input type="text" id="envio-direccion" placeholder="Calle y número"></div>
            <div class="form-row"><label for="envio-localidad">Localidad *</label><input type="text" id="envio-localidad" placeholder="Ej: La Plata"></div>
            <div class="form-row"><label for="envio-provincia">Provincia *</label><input type="text" id="envio-provincia" placeholder="Ej: Buenos Aires"></div>
            <div class="form-row"><label for="envio-cp">Código Postal *</label><input type="text" id="envio-cp" placeholder="Ej: 1900"></div>
            <div class="form-row"><label for="envio-referencias">Referencias</label><input type="text" id="envio-referencias" placeholder="Opcional"></div>
            <div class="form-row"><label for="envio-nombre-destinatario">Nombre del destinatario *</label><input type="text" id="envio-nombre-destinatario" placeholder="Ej: Juan Perez"></div>
          </div>
        </div>
      </div>
    </section>

    <section class="checkout-section">
      <h3>Datos de contacto</h3>
      <div class="form-row"><label>Nombre completo *</label><input type="text" id="contacto-nombre" placeholder="Nombre y apellido"></div>
      <div class="form-row"><label>Teléfono *</label><input type="tel" id="contacto-telefono" placeholder="11 1234-5678"></div>
      <div class="form-row"><label>Email *</label><input type="email" id="contacto-email" placeholder="tu@email.com"></div>
    </section>

    <div class="checkout-actions">
      <button id="enviar-whatsapp-btn">Enviar pedido por WhatsApp</button>
    </div>
  </main>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>.swal2-popup{border-radius:14px!important}</style>

  <!-- Datos del servidor -->
  <script>
    // Productos actualizados desde el servidor
    window.productosActualizados = {{ productos_actualizados | tojson }};
  </script>

  <!-- Script principal del carrito -->
  <script src="/static/js/carrito.js"></script>
</body>
</html>
